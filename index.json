[{"content":"\u003ch1 id=\"somnia-when-dreams-meet-ai\"\u003eSomnia: When Dreams Meet AI\u003c/h1\u003e\n\u003cp\u003eEver wondered what your dreams actually mean? As a 27-year-old engineering student fascinated by the intersection of AI and human psychology, I built Somnia - a modern Flutter dream journal that uses AI to unlock the hidden patterns in your subconscious mind.\u003c/p\u003e\n\u003cp\u003eThis isn\u0026rsquo;t just another note-taking app. It\u0026rsquo;s a complete system that combines dream logging, AI-powered analysis, and freemium monetization into a polished mobile experience.\u003c/p\u003e\n\u003ch2 id=\"the-problem-i-wanted-to-solve\"\u003eThe Problem I Wanted to Solve\u003c/h2\u003e\n\u003cp\u003eDuring my time at Digicel, I learned the value of data analysis and pattern recognition in network systems. I got curious: what if we could apply similar analytical approaches to something as personal and mysterious as dreams?\u003c/p\u003e\n\u003cp\u003eTraditional dream journals are just text dumps. You write, you forget, you never really understand the patterns. I wanted something smarter - an app that could:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTrack dreams with rich metadata (mood, lucidity, themes)\u003c/li\u003e\n\u003cli\u003eAnalyze patterns using AI\u003c/li\u003e\n\u003cli\u003eProvide actionable insights for lucid dreaming\u003c/li\u003e\n\u003cli\u003eActually help users understand their subconscious minds\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv style=\"display: flex; gap: 20px; justify-content: center; margin: 30px 0;\"\u003e\r\n  \u003cdiv style=\"text-align: center; flex: 1; max-width: 300px;\"\u003e\r\n    \u003cimg src=\"/images/projects/somnia/Screenshot_Onboarding.png\" alt=\"Welcome Screen\" style=\"width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);\"\u003e\r\n    \u003cp style=\"margin-top: 10px;\"\u003e\u003cstrong\u003eWelcome Screen\u003c/strong\u003e\u003c/p\u003e\r\n  \u003c/div\u003e\r\n  \u003cdiv style=\"text-align: center; flex: 1; max-width: 300px;\"\u003e\r\n    \u003cimg src=\"/images/projects/somnia/Screenshot_Stats.png\" alt=\"Insights Dashboard\" style=\"width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);\"\u003e\r\n    \u003cp style=\"margin-top: 10px;\"\u003e\u003cstrong\u003eInsights Dashboard\u003c/strong\u003e\u003c/p\u003e\r\n  \u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003ch2 id=\"the-complete-system-architecture\"\u003eThe Complete System Architecture\u003c/h2\u003e\n\u003ch3 id=\"frontend-modern-flutter-with-riverpod\"\u003eFrontend: Modern Flutter with Riverpod\u003c/h3\u003e\n\u003cp\u003eSomnia is built with Flutter, using the latest Material Design 3 principles and sophisticated state management:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// Clean, type-safe state management with Riverpod\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e dreamProvider \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e StateNotifierProvider\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eDreamNotifier, AsyncValue\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eList\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eDream\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u0026gt;\u0026gt;\u003c/span\u003e(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  (ref) \u003cspan style=\"color:#f92672\"\u003e=\u0026gt;\u003c/span\u003e DreamNotifier(ref.read(supabaseServiceProvider))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// Real-time UI updates with proper loading states\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDreamListScreen\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eextends\u003c/span\u003e ConsumerWidget {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e@\u003c/span\u003eoverride\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Widget build(BuildContext context, WidgetRef ref) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e dreamsAsync \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e ref.watch(dreamProvider);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e dreamsAsync.when(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      loading: () \u003cspan style=\"color:#f92672\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e LottieLoadingWidget(),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      error: (error, stack) \u003cspan style=\"color:#f92672\"\u003e=\u0026gt;\u003c/span\u003e ErrorWidget(error.toString()),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      data: (dreams) \u003cspan style=\"color:#f92672\"\u003e=\u0026gt;\u003c/span\u003e DreamListView(dreams: dreams),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    );\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cstrong\u003eKey Features:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eMaterial Design 3\u003c/strong\u003e with custom dream-themed color palette\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRiverpod state management\u003c/strong\u003e for reactive UI updates\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLottie animations\u003c/strong\u003e for smooth loading states\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eResponsive design\u003c/strong\u003e that works across different screen sizes\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"backend-supabase-with-edge-functions\"\u003eBackend: Supabase with Edge Functions\u003c/h3\u003e\n\u003cp\u003eInstead of building a custom backend, I leveraged Supabase for maximum efficiency:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDatabase Schema:\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- Core dreams table (content stored encrypted)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCREATE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e dreams (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  id UUID \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e gen_random_uuid() \u003cspan style=\"color:#66d9ef\"\u003ePRIMARY\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eKEY\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  user_id UUID \u003cspan style=\"color:#66d9ef\"\u003eREFERENCES\u003c/span\u003e auth.users(id) \u003cspan style=\"color:#66d9ef\"\u003eON\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDELETE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eCASCADE\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  title TEXT \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e,           \u003cspan style=\"color:#75715e\"\u003e-- AES-256 encrypted on device\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  content TEXT \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e,          \u003cspan style=\"color:#75715e\"\u003e-- AES-256 encrypted on device\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  dream_date DATE \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  mood_rating INTEGER,            \u003cspan style=\"color:#75715e\"\u003e-- Encrypted metadata\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  is_lucid BOOLEAN \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eFALSE\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  tags TEXT[],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  created_at \u003cspan style=\"color:#66d9ef\"\u003eTIMESTAMP\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eWITH\u003c/span\u003e TIME \u003cspan style=\"color:#66d9ef\"\u003eZONE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e NOW()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- User profiles with encryption keys\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCREATE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e user_profiles (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  id UUID \u003cspan style=\"color:#66d9ef\"\u003eREFERENCES\u003c/span\u003e auth.users(id) \u003cspan style=\"color:#66d9ef\"\u003ePRIMARY\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eKEY\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  encryption_key TEXT \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e,   \u003cspan style=\"color:#75715e\"\u003e-- Unique 256-bit AES key per user\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  subscription_tier TEXT \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;free\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  credits_remaining INTEGER \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  created_at \u003cspan style=\"color:#66d9ef\"\u003eTIMESTAMP\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eWITH\u003c/span\u003e TIME \u003cspan style=\"color:#66d9ef\"\u003eZONE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e NOW()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e-- AI analysis results (encrypted after generation)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eCREATE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTABLE\u003c/span\u003e dream_analyses (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  id UUID \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e gen_random_uuid() \u003cspan style=\"color:#66d9ef\"\u003ePRIMARY\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eKEY\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  dream_id UUID \u003cspan style=\"color:#66d9ef\"\u003eREFERENCES\u003c/span\u003e dreams(id) \u003cspan style=\"color:#66d9ef\"\u003eON\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDELETE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eCASCADE\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  user_id UUID \u003cspan style=\"color:#66d9ef\"\u003eREFERENCES\u003c/span\u003e auth.users(id) \u003cspan style=\"color:#66d9ef\"\u003eON\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDELETE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eCASCADE\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  analysis_text TEXT \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e,    \u003cspan style=\"color:#75715e\"\u003e-- Encrypted after AI processing\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  insights JSONB \u003cspan style=\"color:#66d9ef\"\u003eNOT\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNULL\u003c/span\u003e,        \u003cspan style=\"color:#75715e\"\u003e-- Encrypted after AI processing\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  model_used TEXT \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;gpt-3.5-turbo\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  confidence_score DECIMAL(\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e.\u003cspan style=\"color:#ae81ff\"\u003e85\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  credits_consumed INTEGER \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  created_at \u003cspan style=\"color:#66d9ef\"\u003eTIMESTAMP\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eWITH\u003c/span\u003e TIME \u003cspan style=\"color:#66d9ef\"\u003eZONE\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eDEFAULT\u003c/span\u003e NOW()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"ai-analysis-openai-edge-functions\"\u003eAI Analysis: OpenAI Edge Functions\u003c/h3\u003e\n\u003cp\u003eThe real magic happens in the AI analysis system. I deployed a Supabase Edge Function that integrates with OpenAI:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eEdge Function Deployment:\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-typescript\" data-lang=\"typescript\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// supabase/functions/analyze-dream/index.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eimport\u003c/span\u003e { \u003cspan style=\"color:#a6e22e\"\u003eserve\u003c/span\u003e } \u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://deno.land/std@0.168.0/http/server.ts\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eimport\u003c/span\u003e { \u003cspan style=\"color:#a6e22e\"\u003ecreateClient\u003c/span\u003e } \u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;https://esm.sh/@supabase/supabase-js@2\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eserve\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e=\u0026gt;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e { \u003cspan style=\"color:#a6e22e\"\u003edreamText\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003euserId\u003c/span\u003e } \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ejson\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// Check user credits and subscription\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003euser\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esupabase\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    .\u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;user_profiles\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    .\u003cspan style=\"color:#a6e22e\"\u003eselect\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;subscription_tier, credits_remaining\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    .\u003cspan style=\"color:#a6e22e\"\u003eeq\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;id\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003euserId\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    .\u003cspan style=\"color:#a6e22e\"\u003esingle\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#f92672\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003euser\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ecredits_remaining\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003euser\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003esubscription_tier\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e===\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;free\u0026#39;\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eResponse\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eJSON\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003estringify\u003c/span\u003e({\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003eerror\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Insufficient credits\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }), { \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003e402\u003c/span\u003e })\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// Analyze with OpenAI\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eanalysis\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eopenai\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003echat\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ecompletions\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ecreate\u003c/span\u003e({\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003emodel\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;gpt-3.5-turbo\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003emessages\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e [{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003erole\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;system\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;You are a professional dream analyst. Provide insights about themes, emotions, symbols, and lucidity probability.\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }, {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003erole\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;user\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003econtent\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003edreamText\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003emax_tokens\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003e200\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e// Cost optimization\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  })\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// Store results and update credits\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#75715e\"\u003e// ... implementation\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e})\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"smart-features-that-actually-work\"\u003eSmart Features That Actually Work\u003c/h2\u003e\n\u003ch3 id=\"1-intelligent-dream-logging\"\u003e1. Intelligent Dream Logging\u003c/h3\u003e\n\u003cp\u003eThe app goes beyond basic text entry:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDream\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e id;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e title;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e content;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e DateTime dreamDate;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e moodRating; \u003cspan style=\"color:#75715e\"\u003e// 3 (sad), 6 (neutral), 9 (happy)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e isLucid;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e List\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e tags;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e hasAiAnalysis;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e aiAnalysisText;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// Auto-generates titles if user doesn\u0026#39;t provide one\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e displayTitle {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (title.trim().isNotEmpty) \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e title;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e DreamTitleGenerator.generateTitle(content);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"2-ai-powered-analysis-system\"\u003e2. AI-Powered Analysis System\u003c/h3\u003e\n\u003cp\u003eEach dream can be analyzed for:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eThemes\u003c/strong\u003e: Recurring patterns (flying, water, people)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEmotions\u003c/strong\u003e: Underlying emotional content\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSymbols\u003c/strong\u003e: Psychological meanings of dream elements\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLucidity Probability\u003c/strong\u003e: Likelihood the dream was lucid\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMood Correlation\u003c/strong\u003e: How the dream relates to daily mood\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRecommendations\u003c/strong\u003e: Personalized tips for lucid dreaming\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"3-freemium-business-model\"\u003e3. Freemium Business Model\u003c/h3\u003e\n\u003cp\u003eI implemented a complete freemium system:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eUserSubscription\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e subscriptionTier; \u003cspan style=\"color:#75715e\"\u003e// \u0026#39;free\u0026#39;, \u0026#39;premium\u0026#39;, \u0026#39;ultra\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e creditsRemaining;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e DateTime\u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e premiumExpiresAt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e canAnalyzeDream \u003cspan style=\"color:#f92672\"\u003e=\u0026gt;\u003c/span\u003e isPremium \u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e creditsRemaining \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e monthlyAnalysisLimit {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e (subscriptionTier) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;free\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;premium\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;ultra\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e; \u003cspan style=\"color:#75715e\"\u003e// Unlimited\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cstrong\u003eBusiness Logic:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eFree Tier\u003c/strong\u003e: 10 AI analyses per month\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePremium\u003c/strong\u003e: 50 analyses + advanced insights\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUltra\u003c/strong\u003e: Unlimited + priority processing\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCost per analysis\u003c/strong\u003e: ~$0.001 (highly profitable)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"technical-deep-dive\"\u003eTechnical Deep Dive\u003c/h2\u003e\n\u003ch3 id=\"state-management-with-riverpod\"\u003eState Management with Riverpod\u003c/h3\u003e\n\u003cp\u003eComing from my network engineering background, I appreciate robust state management. Riverpod provides exactly that:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDreamNotifier\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eextends\u003c/span\u003e StateNotifier\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eAsyncValue\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eList\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003eDream\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u0026gt;\u0026gt;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e SupabaseService _supabaseService;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  DreamNotifier(\u003cspan style=\"color:#66d9ef\"\u003ethis\u003c/span\u003e._supabaseService) \u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003esuper\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e AsyncValue.loading()) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    loadDreams();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Future\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e loadDreams() \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      state \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e AsyncValue.loading();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e dreams \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _supabaseService.getDreams();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      state \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e AsyncValue.data(dreams);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    } \u003cspan style=\"color:#66d9ef\"\u003ecatch\u003c/span\u003e (error, stackTrace) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      state \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e AsyncValue.error(error, stackTrace);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Future\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e addDream(Dream dream) \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// Optimistic updates for better UX\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    state.whenData((dreams) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      state \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e AsyncValue.data([dream, ...dreams]);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    });\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e _supabaseService.insertDream(dream);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      loadDreams(); \u003cspan style=\"color:#75715e\"\u003e// Refresh from server\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    } \u003cspan style=\"color:#66d9ef\"\u003ecatch\u003c/span\u003e (error) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e// Rollback on error\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e      loadDreams();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      rethrow;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"modern-ui-with-custom-theming\"\u003eModern UI with Custom Theming\u003c/h3\u003e\n\u003cp\u003eThe app features a carefully crafted design system:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eAppTheme\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e dreamPurple \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Color(\u003cspan style=\"color:#ae81ff\"\u003e0xFF6B46C1\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e dreamCyan \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Color(\u003cspan style=\"color:#ae81ff\"\u003e0xFF06B6D4\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e dreamNight \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e Color(\u003cspan style=\"color:#ae81ff\"\u003e0xFF0F172A\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e ThemeData \u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e lightTheme \u003cspan style=\"color:#f92672\"\u003e=\u0026gt;\u003c/span\u003e ThemeData(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    useMaterial3: \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    colorScheme: ColorScheme.fromSeed(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      seedColor: dreamPurple,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      brightness: Brightness.light,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    cardTheme: CardTheme(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      elevation: \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(\u003cspan style=\"color:#ae81ff\"\u003e16\u003c/span\u003e)),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  );\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"performance-optimizations\"\u003ePerformance Optimizations\u003c/h3\u003e\n\u003cp\u003eLearning from my telecom experience with large-scale systems:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eLazy Loading\u003c/strong\u003e: Dreams load on-demand with pagination\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eImage Optimization\u003c/strong\u003e: Lottie animations instead of heavy GIFs\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eState Persistence\u003c/strong\u003e: User preferences saved locally\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOffline Support\u003c/strong\u003e: Core functionality works without internet\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMemory Management\u003c/strong\u003e: Proper disposal of resources and listeners\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"the-ai-analysis-in-action\"\u003eThe AI Analysis in Action\u003c/h2\u003e\n\u003cp\u003eHere\u0026rsquo;s what makes the AI system special:\u003c/p\u003e\n\u003ch3 id=\"prompt-engineering\"\u003ePrompt Engineering\u003c/h3\u003e\n\u003cp\u003eI spent considerable time optimizing the AI prompts for cost and accuracy:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eYou are a professional dream analyst. Analyze this dream in exactly 2-3 sentences.\r\n\r\nThen provide:\r\n- Themes: [list of 2-4 main themes]\r\n- Emotions: [2-3 primary emotions detected]\r\n- Symbols: [2-3 key symbols with brief meanings]\r\n- Lucidity Probability: [0.0-1.0 score]\r\n- Mood Correlation: [positive/neutral/negative]\r\n- Recommendations: [1-2 actionable lucid dreaming tips]\r\n\r\nBe concise but insightful. Focus on psychological accuracy.\r\n\r\nDream: [USER_DREAM_TEXT]\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"cost-optimization\"\u003eCost Optimization\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eToken Limit\u003c/strong\u003e: 200 tokens max per analysis (~$0.001)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eModel Selection\u003c/strong\u003e: GPT-3.5-turbo for cost efficiency\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBatch Processing\u003c/strong\u003e: Multiple dreams analyzed together for premium users\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSmart Caching\u003c/strong\u003e: Similar dreams get cached responses\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"technical-challenges-solved\"\u003eTechnical Challenges Solved\u003c/h2\u003e\n\u003ch3 id=\"1-real-time-data-sync\"\u003e1. Real-Time Data Sync\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// Supabase real-time subscriptions\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e subscription \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e supabase\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  .from(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;dreams\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  .stream(primaryKey: [\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;id\u0026#39;\u003c/span\u003e])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  .eq(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;user_id\u0026#39;\u003c/span\u003e, userId)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  .listen((data) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// Update UI in real-time when data changes\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    ref.read(dreamProvider.notifier).updateFromStream(data);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  });\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"2-offline-first-architecture\"\u003e2. Offline-First Architecture\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eOfflineDreamStorage\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Future\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e saveOfflineDream(Dream dream) \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e prefs \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e SharedPreferences.getInstance();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e offlineDreams \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e getOfflineDreams();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    offlineDreams.add(dream);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e prefs.setString(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;offline_dreams\u0026#39;\u003c/span\u003e, jsonEncode(offlineDreams));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  Future\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e syncOfflineDreams() \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e offlineDreams \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e getOfflineDreams();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e dream \u003cspan style=\"color:#66d9ef\"\u003ein\u003c/span\u003e offlineDreams) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e supabaseService.insertDream(dream);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e clearOfflineDreams();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"3-complex-json-handling\"\u003e3. Complex JSON Handling\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eDreamAnalysis\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e DreamInsights insights;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efactory\u003c/span\u003e DreamAnalysis.fromJson(Map\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003edynamic\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e json) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e DreamAnalysis(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      insights: DreamInsights.fromJson(json[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;insights\u0026#39;\u003c/span\u003e]),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e// ... other fields\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    );\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// No code generation needed - clean manual serialization\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"the-publishing--oauth-authentication-hell\"\u003eThe Publishing / OAuth Authentication Hell\u003c/h2\u003e\n\u003cp\u003eMan.. getting the app approved on the Play Store is an entirely different beast from building it. I spent a solid week debugging Google Sign-In authentication issues that only appeared in production builds.\u003c/p\u003e\n\u003ch3 id=\"the-three-certificate-problem\"\u003eThe Three-Certificate Problem\u003c/h3\u003e\n\u003cp\u003eHere\u0026rsquo;s the thing about Android app signing that will absolutely wreck your deployment if you don\u0026rsquo;t understand it:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eYour app gets signed THREE different times:\u003c/strong\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eDebug builds\u003c/strong\u003e (\u003ccode\u003eflutter run\u003c/code\u003e)  Signed with debug certificate\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLocal release builds\u003c/strong\u003e (\u003ccode\u003eflutter build apk --release\u003c/code\u003e)  Signed with your upload certificate\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePlay Store downloads\u003c/strong\u003e  Google re-signs with their App Signing certificate\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThe critical realization: \u003cstrong\u003eEven internal testing uses Google\u0026rsquo;s certificate\u003c/strong\u003e, not yours.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# What I thought was happening:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eflutter build appbundle  Upload to Play Store  Users download my signed app\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# What actually happens:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eflutter build appbundle  Upload to Play Store  Google strips my signature\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e Google re-signs with THEIR certificate  Users download Google-signed app\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"error-code-10-the-developers-nightmare\"\u003eError Code 10: The Developer\u0026rsquo;s Nightmare\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ePlatformException(sign_in_failed, com.google.android.gms.common.api.ApiException: 10)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis error code haunted me for days (freal). \u003ccode\u003eApiException: 10\u003c/code\u003e means \u003ccode\u003eDEVELOPER_ERROR\u003c/code\u003e - Google\u0026rsquo;s polite way of saying \u0026ldquo;your OAuth configuration is wrong.\u0026rdquo;\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eWhat was wrong:\u003c/strong\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eI was using the \u003cstrong\u003eAndroid OAuth client ID\u003c/strong\u003e in my code instead of the \u003cstrong\u003eWeb client ID\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eI had registered my \u003cstrong\u003eupload certificate\u003c/strong\u003e SHA-1, but not the \u003cstrong\u003ePlay Store signing certificate\u003c/strong\u003e SHA-1\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"the-client-id-confusion\"\u003eThe Client ID Confusion\u003c/h3\u003e\n\u003cp\u003eThis is the part that killed me dead bro. Google Sign-In requires different client IDs for different purposes:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// WRONG - Using Android client ID (type 1)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e webClientId \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1027251168998-d74qj4ms7c3cepujnnv1g3a7ukgt9ast...\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// CORRECT - Using Web client ID (type 3)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e webClientId \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1027251168998-b3ith979iulja574ra6tc3vsvlq8fn6b...\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThe \u003ccode\u003eserverClientId\u003c/code\u003e parameter needs your \u003cstrong\u003eWeb application client\u003c/strong\u003e for backend authentication (Supabase). The Android client is matched \u003cstrong\u003eautomatically\u003c/strong\u003e by your app\u0026rsquo;s package name and certificate SHA-1.\u003c/p\u003e\n\u003ch3 id=\"hunting-down-sha-1-certificates\"\u003eHunting Down SHA-1 Certificates\u003c/h3\u003e\n\u003cp\u003eI had to track down THREE different SHA-1 fingerprints:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Debug certificate (for development)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekeytool -list -v -alias androiddebugkey \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  -keystore ~/.android/debug.keystore \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  -storepass android | grep \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SHA1:\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#  67:9A:B8:AE:35:1E:B1:A7:AA:B3:84:EF:84:CA:5B:2C:D8:5A:E4:0D\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Upload certificate (for local release testing)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ekeytool -list -v -keystore android/app/somnia-release-key.jks \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  -alias somnia -storepass \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;somnia2025!\u0026#34;\u003c/span\u003e | grep \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SHA1:\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#  AC:B8:FF:8D:1C:C6:42:A4:1B:B8:00:FD:85:A0:7A:48:F5:43:1F:A6\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Play Store signing certificate (the one that matters for production)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# Only available in Play Console  App integrity\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#  D6:AB:49:45:FC:30:3A:15:A1:C3:E1:15:0C:1E:FA:11:51:B7:EC:8D\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eAll three had to be registered in Firebase Console and have corresponding OAuth clients in Google Cloud Console.\u003c/p\u003e\n\u003ch3 id=\"production-debugging-without-console-logs\"\u003eProduction Debugging Without Console Logs\u003c/h3\u003e\n\u003cp\u003eHere\u0026rsquo;s another fun challenge: production builds don\u0026rsquo;t show console logs. When beta testers reported that Google Sign-In \u0026ldquo;just closes the window with no error,\u0026rdquo; I had zero visibility into what was happening.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eSolution: Persistent Error Logging\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eI built a custom error tracking system that saves errors to \u003ccode\u003eSharedPreferences\u003c/code\u003e and displays them in a debug dialog:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eErrorLogger\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e Future\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e logError(\u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e error, {\u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e context}) \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e prefs \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e SharedPreferences.getInstance();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e errorLog \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e=== ERROR LOG ===\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eTime: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eDateTime.now().toIso8601String()\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eContext: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003econtext \u003cspan style=\"color:#f92672\"\u003e??\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Unknown\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003eError: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e$\u003c/span\u003eerror\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e=================\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e prefs.setString(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;last_error_log\u0026#39;\u003c/span\u003e, errorLog);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// In the login screen - add a debug button\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003eWidget _buildDebugButton() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e TextButton.icon(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    onPressed: () \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e lastError \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e ErrorLogger.getLastError();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#75715e\"\u003e// Show error dialog that users can screenshot\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e      showErrorDialog(lastError);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    icon: Icon(Icons.bug_report),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    label: Text(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;View Last Error (Debug)\u0026#39;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  );\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThis let beta testers screenshot the actual error and send it to me. That\u0026rsquo;s how I discovered the SHA-1 mismatch.\u003c/p\u003e\n\u003ch3 id=\"step-by-step-logging-in-production\"\u003eStep-by-Step Logging in Production\u003c/h3\u003e\n\u003cp\u003eSince I couldn\u0026rsquo;t see console output, I logged every single step of the authentication flow:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e Future\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e signInWithGoogle() \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e ErrorLogger.logError(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;STEP 1: Starting Google Sign-In\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e webClientId \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1027251168998-b3ith979iulja574ra6tc3vsvlq8fn6b...\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e ErrorLogger.logError(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;STEP 2: Clearing cache\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e GoogleSignIn().signOut();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e ErrorLogger.logError(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;STEP 3: Creating GoogleSignIn instance\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e googleSignIn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e GoogleSignIn(serverClientId: webClientId);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e ErrorLogger.logError(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;STEP 4: Calling signIn()\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e googleUser \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e googleSignIn.signIn();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (googleUser \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e ErrorLogger.logError(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;STEP 5: User cancelled\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e ErrorLogger.logError(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;STEP 6: Got user: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egoogleUser.email\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e// ... rest of authentication flow\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  } \u003cspan style=\"color:#66d9ef\"\u003ecatch\u003c/span\u003e (e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eawait\u003c/span\u003e ErrorLogger.logError(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;EXCEPTION: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e$\u003c/span\u003ee\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    rethrow;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThis approach revealed that the flow was failing at \u0026ldquo;STEP 4\u0026rdquo; with \u003ccode\u003eApiException: 10\u003c/code\u003e - pointing directly to the OAuth configuration.\u003c/p\u003e\n\u003ch3 id=\"the-fix-that-actually-worked\"\u003eThe Fix That Actually Worked\u003c/h3\u003e\n\u003cp\u003eAfter a week of debugging, the solution was a three-step process:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eGet the Play Store signing SHA-1\u003c/strong\u003e from Play Console  App integrity\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCreate an Android OAuth client\u003c/strong\u003e in Google Cloud Console with that SHA-1\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUse the Web client ID\u003c/strong\u003e in code (not the Android client)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// Final working configuration\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e Future\u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e signInWithGoogle() \u003cspan style=\"color:#66d9ef\"\u003easync\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// Web client ID for Supabase backend authentication\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e webClientId \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;1027251168998-b3ith979iulja574ra6tc3vsvlq8fn6b.apps.googleusercontent.com\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e GoogleSignIn googleSignIn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e GoogleSignIn(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    serverClientId: webClientId, \u003cspan style=\"color:#75715e\"\u003e// Web client for backend\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  );\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// Android client auto-matched by package + SHA-1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"what-this-taught-me-about-mobile-development\"\u003eWhat This Taught Me About Mobile Development\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eThe Production Reality Gap\u003c/strong\u003e: Things that work perfectly in development can spectacularly fail in production due to signing, permissions, and platform-specific quirks you\u0026rsquo;d never encounter locally.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eDocumentation Isn\u0026rsquo;t Always Right\u003c/strong\u003e: Google\u0026rsquo;s documentation doesn\u0026rsquo;t clearly explain the three-certificate system or the difference between Web and Android client IDs for hybrid authentication flows.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eBuild Your Own Debugging Tools\u003c/strong\u003e: When platform limitations prevent normal debugging, you need creative solutions. The persistent error logging system saved this launch.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eTesting Matrix Is Essential\u003c/strong\u003e:\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e Debug mode (flutter run)  Works\r\n USB install (flutter install --release)  Works\r\n Play Store download  Fails\r\n\r\nLesson: Test the ACTUAL distribution method early.\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis experience made me appreciate why companies have dedicated DevOps and release engineering teams. Getting from \u0026ldquo;working on my machine\u0026rdquo; to \u0026ldquo;working for all users via the Play Store\u0026rdquo; is a discipline unto itself.\u003c/p\u003e\n\u003ch2 id=\"what-i-learned-building-this\"\u003eWhat I Learned Building This\u003c/h2\u003e\n\u003ch3 id=\"1-mobile-development-maturity\"\u003e1. Mobile Development Maturity\u003c/h3\u003e\n\u003cp\u003eFlutter has come a long way. The developer experience with hot reload, the widget system, and package ecosystem made complex features surprisingly manageable. But the gap between development and production deployment is still very real.\u003c/p\u003e\n\u003ch3 id=\"2-ai-integration-reality\"\u003e2. AI Integration Reality\u003c/h3\u003e\n\u003cp\u003eThe hype around AI is real, but the implementation details matter. Cost optimization, prompt engineering, and error handling are crucial for production apps.\u003c/p\u003e\n\u003ch3 id=\"3-privacy-isnt-optional\"\u003e3. Privacy Isn\u0026rsquo;t Optional\u003c/h3\u003e\n\u003cp\u003eBuilding encryption from the ground up taught me that security is easiest when designed in from day one. Retrofit encryption is painful - but with dreams being so personal, it was non-negotiable. Users deserve to know their subconscious thoughts aren\u0026rsquo;t stored in plain text on someone else\u0026rsquo;s server.\u003c/p\u003e\n\u003ch3 id=\"4-freemium-business-models\"\u003e4. Freemium Business Models\u003c/h3\u003e\n\u003cp\u003eUsers are willing to pay for AI-powered insights, but the free tier needs to provide genuine value. The conversion funnel is all about demonstrating value before asking for payment.\u003c/p\u003e\n\u003ch3 id=\"5-state-management-evolution\"\u003e5. State Management Evolution\u003c/h3\u003e\n\u003cp\u003eRiverpod feels like the future of Flutter state management. It\u0026rsquo;s more complex than Provider but scales beautifully for real applications.\u003c/p\u003e\n\u003ch2 id=\"development-stats\"\u003eDevelopment Stats\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDevelopment Time\u003c/strong\u003e: 3 months (part-time while studying)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLines of Code\u003c/strong\u003e: ~5,000 Dart + 500 TypeScript (Edge Functions)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDependencies\u003c/strong\u003e: 15 packages (kept lean)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTest Coverage\u003c/strong\u003e: 67% (ongoing improvement)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePlatforms\u003c/strong\u003e: Android, iOS, Web ready\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDebugging Time\u003c/strong\u003e: 1 week for OAuth/publishing issues alone\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eApp Versions\u003c/strong\u003e: 11 releases to fix Google Sign-In authentication\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBeta Testers\u003c/strong\u003e: Internal testing track with OAuth debugging tools\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"future-roadmap\"\u003eFuture Roadmap\u003c/h2\u003e\n\u003ch3 id=\"phase-1-enhanced-ai-features\"\u003ePhase 1: Enhanced AI Features\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDream Prediction\u003c/strong\u003e: ML models predicting likely dream themes\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePersonalization\u003c/strong\u003e: AI that learns individual dream patterns\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSleep Integration\u003c/strong\u003e: Correlation with sleep tracking data\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"phase-2-social-features\"\u003ePhase 2: Social Features\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eAnonymous Sharing\u003c/strong\u003e: Community insights without privacy loss\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDream Challenges\u003c/strong\u003e: Gamified lucid dreaming goals\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eExpert Analysis\u003c/strong\u003e: Connect with certified dream therapists\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"phase-3-advanced-analytics\"\u003ePhase 3: Advanced Analytics\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePattern Recognition\u003c/strong\u003e: Long-term trend analysis\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMood Correlation\u003c/strong\u003e: Integration with mental health tracking\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCustom Insights\u003c/strong\u003e: Personalized dashboard with actionable recommendations\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"the-tech-stack-that-works\"\u003eThe Tech Stack That Works\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eFrontend:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eFlutter 3.8+ with Material Design 3\u003c/li\u003e\n\u003cli\u003eRiverpod for state management\u003c/li\u003e\n\u003cli\u003eLottie for animations\u003c/li\u003e\n\u003cli\u003eSharedPreferences for local storage\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eBackend:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSupabase (PostgreSQL + Auth + Edge Functions)\u003c/li\u003e\n\u003cli\u003eOpenAI GPT-3.5-turbo for analysis\u003c/li\u003e\n\u003cli\u003eRow Level Security for data privacy\u003c/li\u003e\n\u003cli\u003eEnd-to-end encryption for dream content\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eDevOps:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGitHub Actions for CI/CD\u003c/li\u003e\n\u003cli\u003eAutomated testing and deployment\u003c/li\u003e\n\u003cli\u003eEnvironment-based configuration\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"why-this-project-matters\"\u003eWhy This Project Matters\u003c/h2\u003e\n\u003cp\u003eSomnia isn\u0026rsquo;t just a portfolio piece - it\u0026rsquo;s a working product that solves real problems. It demonstrates:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eFull-Stack Mobile Development\u003c/strong\u003e: End-to-end Flutter application with backend integration\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eAI/ML Integration\u003c/strong\u003e: Practical application of LLMs with cost optimization\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBusiness Model Implementation\u003c/strong\u003e: Complete freemium system with subscription management\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eModern Architecture\u003c/strong\u003e: Clean code practices and scalable patterns\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUser-Centered Design\u003c/strong\u003e: Solving actual user problems with thoughtful UX\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAs an engineering student preparing for my internship in 2026, this project showcases my ability to take complex technical concepts and turn them into polished, user-facing applications that people actually want to use.\u003c/p\u003e\n\u003cp\u003eThe intersection of AI, mobile development, and human psychology fascinates me - and Somnia proves that with the right technical approach, you can build products that genuinely enhance people\u0026rsquo;s understanding of themselves.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"app-screenshots\"\u003eApp Screenshots\u003c/h2\u003e\n\u003cp\u003eHere\u0026rsquo;s what Somnia looks like in action:\u003c/p\u003e\n\u003cdiv style=\"display: flex; gap: 20px; justify-content: center; margin: 30px 0;\"\u003e\r\n  \u003cdiv style=\"text-align: center; flex: 1; max-width: 300px;\"\u003e\r\n    \u003cimg src=\"/images/projects/somnia/Screenshot_Dreamscreen.png\" alt=\"Dream List Screen\" style=\"width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);\"\u003e\r\n    \u003cp style=\"margin-top: 10px;\"\u003e\u003cstrong\u003eDream List\u003c/strong\u003e - Clean interface with mood indicators and AI badges\u003c/p\u003e\r\n  \u003c/div\u003e\r\n  \u003cdiv style=\"text-align: center; flex: 1; max-width: 300px;\"\u003e\r\n    \u003cimg src=\"/images/projects/somnia/Screenshot_CreateDream.png\" alt=\"Create Dream Screen\" style=\"width: 100%; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);\"\u003e\r\n    \u003cp style=\"margin-top: 10px;\"\u003e\u003cstrong\u003eCreate Dream\u003c/strong\u003e - Simple dream logging with mood and lucidity tracking\u003c/p\u003e\r\n  \u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003ch2 id=\"privacy--security-your-dreams-stay-yours\"\u003ePrivacy \u0026amp; Security: Your Dreams Stay Yours\u003c/h2\u003e\n\u003cp\u003eIn an age where personal data is often treated as a commodity, I built Somnia with privacy as a foundational principle. Dreams are deeply personal - they contain your fears, hopes, memories, and subconscious thoughts. That data deserves protection.\u003c/p\u003e\n\u003ch3 id=\"end-to-end-encryption-implementation\"\u003eEnd-to-End Encryption Implementation\u003c/h3\u003e\n\u003cp\u003eEvery dream you write is encrypted on your device before being sent to the server:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eEncryptionService\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// AES-256-CBC encryption with user-specific keys\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e encryptString(\u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e plainText, \u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e keyString) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e key \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e encrypt.Key(base64.decode(keyString)); \u003cspan style=\"color:#75715e\"\u003e// 256-bit key\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e encrypter \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e encrypt.Encrypter(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      encrypt.AES(key, mode: encrypt.AESMode.cbc),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    );\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e encrypted \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e encrypter.encrypt(plainText, iv: _fixedIV);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e encrypted.base64;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003cstrong\u003eWhat this means for you:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eDevice-Side Encryption\u003c/strong\u003e: Your dreams are encrypted on your phone before being uploaded\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUnique User Keys\u003c/strong\u003e: Each user gets a unique 256-bit AES encryption key stored securely in their profile\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eZero-Knowledge Architecture\u003c/strong\u003e: Even the database administrator can\u0026rsquo;t read your dreams without your encryption key\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSecure AI Analysis\u003c/strong\u003e: Dreams are decrypted server-side only during AI analysis, then immediately re-encrypted\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"privacy-first-architecture\"\u003ePrivacy-First Architecture\u003c/h3\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e    Encrypted    \r\n  Your Device               Supabase DB    \r\n  (Plain Text)                      (Encrypted)     \r\n                 \r\n                                            \r\n         Encryption Key                     \r\n         (Stored in Profile)                \r\n                                            \r\n                                            \r\n    Decrypted    \r\n  AI Analysis              Edge Function   \r\n  (Temporary)              Re-encrypts     \r\n    Analysis     \n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eMulti-Layer Security:\u003c/strong\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eRow Level Security (RLS)\u003c/strong\u003e: Supabase enforces that users can only access their own data\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eJWT Authentication\u003c/strong\u003e: All API requests require valid authentication tokens\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEncryption at Rest\u003c/strong\u003e: Dreams stored as encrypted ciphertext in PostgreSQL\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eNo Third-Party Analytics\u003c/strong\u003e: No Google Analytics, Facebook Pixel, or tracking SDKs\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLocal-First Approach\u003c/strong\u003e: Offline mode keeps dreams on your device until you\u0026rsquo;re ready to sync\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"data-you-control\"\u003eData You Control\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eWhat We Store:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEncrypted dream content (title, content, date)\u003c/li\u003e\n\u003cli\u003eDream metadata (mood, lucidity rating) - \u003cstrong\u003eencrypted\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eAI analysis results - \u003cstrong\u003eencrypted after generation\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eSubscription tier and credits remaining\u003c/li\u003e\n\u003cli\u003eAuthentication tokens (managed by Supabase Auth)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eWhat We DON\u0026rsquo;T Store:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eUnencrypted dream text\u003c/li\u003e\n\u003cli\u003eDevice identifiers or advertising IDs\u003c/li\u003e\n\u003cli\u003eLocation data\u003c/li\u003e\n\u003cli\u003eBrowsing history or app usage patterns\u003c/li\u003e\n\u003cli\u003eSocial media connections (beyond initial Google Sign-In)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eYour Rights:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eExport All Data\u003c/strong\u003e: Download your complete dream journal as JSON\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDelete Account\u003c/strong\u003e: Permanently remove all data with one tap\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRevoke Access\u003c/strong\u003e: Sign out from all devices anytime\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eData Portability\u003c/strong\u003e: Standard format for migrating to other apps\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"open-source-commitment\"\u003eOpen Source Commitment\u003c/h3\u003e\n\u003cp\u003eThe encryption implementation is open source and auditable:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-dart\" data-lang=\"dart\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// lib/services/encryption_service.dart\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// View the complete implementation on GitHub\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003estatic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eString\u003c/span\u003e generateKey() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003efinal\u003c/span\u003e key \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e encrypt.Key.fromSecureRandom(\u003cspan style=\"color:#ae81ff\"\u003e32\u003c/span\u003e); \u003cspan style=\"color:#75715e\"\u003e// 256-bit secure random\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e base64.encode(key.bytes);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eYou can verify that we\u0026rsquo;re using industry-standard AES-256-CBC encryption with properly random keys. No backdoors, no key escrow, no compromises.\u003c/p\u003e\n\u003ch3 id=\"compliance--best-practices\"\u003eCompliance \u0026amp; Best Practices\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eGDPR Compliant\u003c/strong\u003e: Data minimization, user consent, right to erasure\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eNo Selling Data\u003c/strong\u003e: Your dreams are never sold to advertisers or data brokers\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMinimal Retention\u003c/strong\u003e: Deleted dreams are purged within 30 days\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSecure Credentials\u003c/strong\u003e: All API keys stored in environment variables, never in code\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eRegular Security Audits\u003c/strong\u003e: Automated dependency scanning and security testing\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"why-this-matters\"\u003eWhy This Matters\u003c/h3\u003e\n\u003cp\u003eMany apps claim \u0026ldquo;privacy\u0026rdquo; but still send your data in plain text to their servers. With Somnia:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eEven if our database is compromised\u003c/strong\u003e, attackers only get encrypted ciphertext\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEven if Supabase employees look at the data\u003c/strong\u003e, they see gibberish without your key\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEven during AI analysis\u003c/strong\u003e, dreams are decrypted temporarily and never logged\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThis is the same encryption standard used by:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSignal for end-to-end encrypted messaging\u003c/li\u003e\n\u003cli\u003eProtonMail for secure email\u003c/li\u003e\n\u003cli\u003e1Password for password management\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYour subconscious thoughts deserve the same protection as your passwords.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"current-status--availability\"\u003eCurrent Status \u0026amp; Availability\u003c/h2\u003e\n\u003cp\u003eAfter overcoming the OAuth authentication challenges, \u003cstrong\u003eSomnia is now live on the Google Play Store\u003c/strong\u003e in internal testing. The app successfully handles:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e Google Sign-In authentication across all distribution channels\u003c/li\u003e\n\u003cli\u003e AI-powered dream analysis with freemium monetization\u003c/li\u003e\n\u003cli\u003e Real-time data synchronization with Supabase\u003c/li\u003e\n\u003cli\u003e End-to-end encryption for all dream content\u003c/li\u003e\n\u003cli\u003e Privacy-first architecture with zero-knowledge storage\u003c/li\u003e\n\u003cli\u003e Persistent error logging for production debugging\u003c/li\u003e\n\u003cli\u003e Multi-certificate signing for Play Store distribution\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe journey from \u0026ldquo;working on my machine\u0026rdquo; to \u0026ldquo;working for beta testers\u0026rdquo; taught me more about production mobile development than any tutorial could. This project demonstrates not just the ability to build features, but to troubleshoot and deploy them in the real world with genuine respect for user privacy.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eTechnical Highlights:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eComplete Flutter application with Riverpod state management\u003c/li\u003e\n\u003cli\u003eSupabase backend with Edge Functions and PostgreSQL\u003c/li\u003e\n\u003cli\u003eOpenAI integration with cost-optimized prompts\u003c/li\u003e\n\u003cli\u003eEnd-to-end encryption using AES-256-CBC\u003c/li\u003e\n\u003cli\u003eOAuth 2.0 authentication with multiple signing certificates\u003c/li\u003e\n\u003cli\u003eProduction-grade error tracking and logging system\u003c/li\u003e\n\u003cli\u003eFreemium business model with subscription management\u003c/li\u003e\n\u003cli\u003eGDPR-compliant data handling and privacy controls\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cem\u003eFull technical documentation available, including the complete OAuth troubleshooting guide and encryption implementation details. Open to discussing the technical architecture or exploring collaboration opportunities.\u003c/em\u003e\u003c/p\u003e\n","description":"A Flutter dream journal app with AI analysis, Supabase backend, and freemium monetization","image":"/images/projects/somnia/somnia_logo.png","permalink":"https://rizpur.com/projects/somnia/","title":"Somnia: AI-Powered Dream Journal"},{"content":"\u003ch2 id=\"a-real-time-data-management-solution\"\u003eA Real-Time Data Management Solution\u003c/h2\u003e\n\u003cp\u003eEver thought about how to make sense of all the data you have just floating around your business? This application, Caribbean Log Data Dashboard, built with React Leaflet, MySQL, and Laravel aims to address that.\u003c/p\u003e\n\u003ch2 id=\"dashboard-architecture\"\u003eDashboard Architecture\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eReact Leaflet: For the cool interactive map you see on the dashboard.\u003c/li\u003e\n\u003cli\u003eMySQL: Where all the data lives.\u003c/li\u003e\n\u003cli\u003eLaravel: Makes sure everything talks to each other nicely and keeps it secure.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"enter-and-modify-data-like-a-breeze\"\u003eEnter and Modify Data Like A Breeze\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eQuick Short Forms: No more endless scrolling.\u003c/li\u003e\n\u003cli\u003eDrag-and-Drop: Move things around as you like.\u003c/li\u003e\n\u003cli\u003eReal-Time Validation: Know you\u0026rsquo;re good as you go.\u003c/li\u003e\n\u003cli\u003eCool Animations: Because why not?\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"external-data-no-problem\"\u003eExternal Data? No Problem\u003c/h2\u003e\n\u003cp\u003eYou\u0026rsquo;re not limited to static data. Need to pull in some weather info or maybe some real-time shipping or employee data?\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAPIs: Use RESTful APIs to pull in data from pretty much anywhere.\u003c/li\u003e\n\u003cli\u003eWebhooks: Set up webhooks to get real-time notifications and updates from other platforms.\u003c/li\u003e\n\u003cli\u003eSNMP: For the network junkies, we support Simple Network Management Protocol. Monitor devices like routers, switches, and servers right in the dashboard.\u003c/li\u003e\n\u003cli\u003eLive Database Connection: Our system can hook directly into a live MySQL database.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"real-time-goodness\"\u003eReal-Time Goodness\u003c/h2\u003e\n\u003cp\u003eWe\u0026rsquo;ve got real-time updates! Thanks to Laravel events and a little help from the Ably platform, any changes get pushed to everyone who\u0026rsquo;s logged in. No more hitting the refresh button like it\u0026rsquo;s 1999.\u003c/p\u003e\n\u003ch2 id=\"hop-between-regions\"\u003eHop Between Regions\u003c/h2\u003e\n\u003cimg src=\"/images/projects/caribbean/region.gif\" alt=\"Region Hop\" width=\"500\" height=\"300\"\u003e\n\u003ch2 id=\"data-filters\"\u003eData Filters\u003c/h2\u003e\n\u003cp\u003eYou can slice and dice the data however you want. Need to see stats for a specific parish or region from a certain date and time? No problemo. The front-end is all React, so it\u0026rsquo;s smooth like butter.\u003c/p\u003e\n\u003cimg src=\"/images/projects/caribbean/parish.gif\" alt=\"Parish Hop\" width=\"500\" height=\"300\"\u003e\n\u003ch2 id=\"whats-next\"\u003eWhat\u0026rsquo;s Next?\u003c/h2\u003e\n\u003cp\u003eOpen-Source code will be released soon.\nSee the \u003ca href=\"https://github.com/RizPur/LoginMap\"\u003esingle-user Jamaica beta version here\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eGot questions or want to collaborate? \u003ca href=\"/#contact\"\u003eContact me\u003c/a\u003e\u003c/p\u003e\n","description":"A Full Stack Web Application used to record and track log data across the Caribbean region","image":"/images/projects/caribbean/jamaica.png","permalink":"https://rizpur.com/projects/caribbean-tracker/","title":"Caribbean Log Tracker"},{"content":"\u003ch1 id=\"eye-tracking-aac-system\"\u003eEye-Tracking AAC System\u003c/h1\u003e\n\u003cp\u003eAugmentative and Alternative Communication (AAC) refers to the field of emerging technologies that utilizes communication systems to aide or supplement speech or writing for those with impairments or difficulties communicating.\u003c/p\u003e\n\u003cp\u003eIt allows people to regain or enhance certain communications skills usually impaired by congenital conditions or acquired maladies such as autism or cerebral palsy.\u003c/p\u003e\n\u003ch2 id=\"inspiration\"\u003eInspiration\u003c/h2\u003e\n\n\n    \n    \u003cdiv style=\"position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;\"\u003e\n      \u003ciframe allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen=\"allowfullscreen\" loading=\"eager\" referrerpolicy=\"strict-origin-when-cross-origin\" src=\"https://www.youtube.com/embed/3yq6vCjswaE?autoplay=0\u0026controls=1\u0026end=0\u0026loop=0\u0026mute=0\u0026start=0\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;\" title=\"YouTube video\"\n      \u003e\u003c/iframe\u003e\n    \u003c/div\u003e\n\n\u003cp\u003eI was captivated by a particular episode of Breaking Bad where Hector Salamanca, a paraplegic and mute character, is being questioned by the DEA. To communicate, he uses a bell and a nurse with a table of the alphabet. The nurse moves row by row, and Hector rings the bell when he sees a letter in the row he wants. Then she moves across the columns for the final selection. The process is repeated letter by letter, word by word, to form sentences.\u003c/p\u003e\n\u003cp\u003eThis was a wicked scene, as we were all waiting to see if Hector would sell out Gus, his long long time enemy. However it was also painstakingly slow. That\u0026rsquo;s when the idea came: what if there was a more efficient way for people like Hector to communicate?\u003c/p\u003e\n\u003ch2 id=\"high-level-circuit-block-diagram\"\u003eHigh-Level Circuit Block Diagram\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"https://showme.redstarplugin.com/d/d:bTqxGs7L\" alt=\"High-level Circuit Block Diagram\"\u003e\u003c/p\u003e\n\u003ch3 id=\"high-level-components\"\u003eHigh-Level Components\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eButton/Gyro Circuit\u003c/strong\u003e: Interfaced with Atmega328p Microcontroller\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUSB Webcam\u003c/strong\u003e: This is running on a webpage, capturing eye movements\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eFlask (Python)\u003c/strong\u003e: running on user\u0026rsquo;s PC to parse and transmit data across components\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"how-it-works\"\u003eHow It Works\u003c/h2\u003e\n\u003cp\u003eThis project was broken into 4 main components:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eGlasses Design\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eWeb Page\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eEye-Tracker\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eButton/Gyro\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"glasses-design\"\u003eGlasses Design\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"/images/projects/eyetracker/douglas.png\" alt=\"Glasses on test user\"\u003e\u003c/p\u003e\n\u003cp\u003eThe Glasses Frame was designed to houst the gyroscope on its side to measure the user\u0026rsquo;s head movements.\nA seperate mount was designed that would fix itself onto the front of the frame to houst the webcam in front of the right eye.\u003c/p\u003e\n\u003ch3 id=\"web-page\"\u003eWeb Page\u003c/h3\u003e\n\u003cdiv style=\"display: flex; justify-content: space-around;\"\u003e\n    \u003cdiv\u003e\n        \u003cimg src=\"/images/projects/eyetracker/grid.png\" alt=\"6x5 grid\" width=\"300\"\u003e\n        \u003cp style=\"text-align: center;\"\u003eOriginal 6x5 Grid\u003c/p\u003e\n    \u003c/div\u003e\n    \u003cdiv\u003e\n        \u003cimg src=\"/images/projects/eyetracker/smallgrid.png\" alt=\"3x2 grid\" width=\"300\"\u003e\n        \u003cp style=\"text-align: center;\"\u003eUpdated 3x2 Grid\u003c/p\u003e\n    \u003c/div\u003e\n\u003c/div\u003e\n\u003cp\u003eThe first design had a 6x5 grid, each letter in its own box. But it was hard to track eye movement accurately because the boxes were too close together. So, we switched to a simpler design: two 3x2 grids with two letters in each box. A button lets you switch between the two grids. This made tracking way more accurate.\u003c/p\u003e\n\u003cp\u003eTo type, you look at a letter and press a buttonleft or rightto select it. When you\u0026rsquo;re done spelling out a word, the computer reads it out loud.\u003c/p\u003e\n\u003ch4 id=\"button-functions\"\u003eButton Functions\u003c/h4\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eAction\u003c/th\u003e\n\u003cth\u003eLeft Button\u003c/th\u003e\n\u003cth\u003eRight Button\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eSingle Press\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eSelects left-sided letter in highlighted box\u003c/td\u003e\n\u003ctd\u003eSelects right-sided letter in highlighted box\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eDouble Press\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eScrolls between the 2 keyboards (A-L | M-Z)\u003c/td\u003e\n\u003ctd\u003eSpeaks word in textbox aloud\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003cstrong\u003eLong Press\u003c/strong\u003e\u003c/td\u003e\n\u003ctd\u003eDeletes a letter from textbox\u003c/td\u003e\n\u003ctd\u003eSelects \u0026lsquo;Y\u0026rsquo; or \u0026lsquo;Z\u0026rsquo; if looking at that letter box\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch3 id=\"buttongyro\"\u003eButton/Gyro\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"/images/projects/eyetracker/circuit.png\" alt=\"Circuit\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e1 Atmega328P\u003c/li\u003e\n\u003cli\u003e2 Push Buttons\u003c/li\u003e\n\u003cli\u003e2 LED\u0026rsquo;s\u003c/li\u003e\n\u003cli\u003e1 MPU6050 Gyroscope\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe buttons and gyro were configured and controlled by the AtMega328p whose job was to write the current angle of the user\u0026rsquo;s head (x,y,z) and the current status of the push buttons the to the Serial Monotor using the Polulu Programmers TTL-serial port.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-C\" data-lang=\"C\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eloop\u003c/span\u003e() {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003egyro\u003c/span\u003e(); \u003cspan style=\"color:#75715e\"\u003e//calculates pitch and roll, converts to degrees, then returns the (x,y,z) coords \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  button.\u003cspan style=\"color:#a6e22e\"\u003etick\u003c/span\u003e(); \u003cspan style=\"color:#75715e\"\u003e//left button \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  button2.\u003cspan style=\"color:#a6e22e\"\u003etick\u003c/span\u003e(); \u003cspan style=\"color:#75715e\"\u003e//right button \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#a6e22e\"\u003etransmit\u003c/span\u003e(); \u003cspan style=\"color:#75715e\"\u003e//sends to serial monitor\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#a6e22e\"\u003edelay\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e50\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e} \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"eye-tracker\"\u003eEye-Tracker\u003c/h3\u003e\n\u003cp\u003eThe system starts by prompting the user to focus on a series of letters displayed on the screen. It records the x and y coordinates of the pupil for each letter, effectively mapping the pupil\u0026rsquo;s position to individual letters. This is done by sending the webcam frames to the python script eyes.py running on Flask using SocketIO.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-javascript\" data-lang=\"javascript\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esendframe\u003c/span\u003e(){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecam\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e document.\u003cspan style=\"color:#a6e22e\"\u003egetElementById\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;camera\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecanv\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e document.\u003cspan style=\"color:#a6e22e\"\u003egetElementById\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;frame\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecanv\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003egetContext\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2d\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#a6e22e\"\u003econtext\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003edrawImage\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ecam\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eimage\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecanv\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003etoDataURL\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;image/jpeg\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#a6e22e\"\u003econsole\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Sending frame\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#a6e22e\"\u003esocket\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eemit\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;frame\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eimage\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eThe py script processes it and returns the current pupil\u0026rsquo;s center coordinates along with the gyro coordinates and the button statuses from the microcontroller where it is converted to a letter\u0026rsquo;s position on the screen and highlighted.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-javascript\" data-lang=\"javascript\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003esocket\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eon\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;response\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003exy\u003c/span\u003e){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003elet\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etex\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;a\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;c\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;e\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;g\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;i\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;k\u0026#39;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003exEye\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003exy\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ex\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003eyEye\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003exy\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ey\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003eprebtn1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebtn1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003eprebtn2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebtn2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e// console.log(xy.data[0])\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#a6e22e\"\u003ebtn1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003exy\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#a6e22e\"\u003ebtn2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003exy\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003edata\u003c/span\u003e[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eprebtn2\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ebtn2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ebtn2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ebtn2\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e)){\u003cspan style=\"color:#a6e22e\"\u003etoScroll\u003c/span\u003e()}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eprebtn1\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ebtn1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ebtn1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ebtn1\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e)){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#a6e22e\"\u003espeakAloud\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#a6e22e\"\u003ecount\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ... \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    })\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eAdditionally, the system captures the initial position of an integrated gyroscope to serve as a reference for the user\u0026rsquo;s head position. If the head position is significantly changed, the user will be prompted to recalibrate.\u003c/p\u003e\n\u003cp\u003eThe main python function is always active, constantly tracking the pupil\u0026rsquo;s position. It\u0026rsquo;s purpose is to return the current pupil\u0026rsquo;s center coordinates to the web page. Here is how it works:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eInitial Isolation\u003c/strong\u003e: The \u0026ldquo;eyes.py\u0026rdquo; starts by analyzing the video feed, frame by frame, to isolate the pupil from the rest of the eye and face. This is achieved using an \u0026rsquo;eye classifier\u0026rsquo; from the openCV python module, trained on tens of thousands of eye images.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003ePixel Tracking\u003c/strong\u003e: The pupil, being the darkest part of the eye, is the focus for tracking. The system converts the eye area into greyscale and sets a color threshold. Pixels below this threshold turn black, effectively leaving the pupil as the only black pixels on the screen.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eBlob Detection\u003c/strong\u003e: To enhance the pupil\u0026rsquo;s visibility, a technique called \u0026lsquo;blob detection\u0026rsquo; is used. This makes the pupil more pronounced and easier to track.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg src=\"/images/projects/eyetracker/eye2.png\" alt=\"Circuit\"\u003e\u003c/p\u003e\n\u003col start=\"4\"\u003e\n\u003cli\u003e\u003cstrong\u003eCoordinate Positioning\u003c/strong\u003e: The system calculates the midpoint of the pronounced pupil blob and uses it as the coordinate position for tracking.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003egetXY\u003c/span\u003e(frame):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e frame \u003cspan style=\"color:#f92672\"\u003eis\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;No frames detected\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    eyes \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e eye_cascade\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edetectMultiScale(frame) \u003cspan style=\"color:#75715e\"\u003e#array of arrays of eyes\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    topx \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    topy \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e150\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    botx \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e400\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    boty \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e350\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003erectangle(frame, (topx,topy), (botx, boty), (\u003cspan style=\"color:#ae81ff\"\u003e255\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e255\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e100\u003c/span\u003e), \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    eye \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e frame[topy:boty, topx:botx]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    gray_eye \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecvtColor(eye, cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eCOLOR_BGR2GRAY)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    blur_eye \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e blob_process(eye, thresh, detector)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    _, contours, _ \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003efindContours(blur_eye, cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eRETR_TREE, cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eCHAIN_APPROX_SIMPLE)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    contours \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e sorted(contours, key\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003elambda\u003c/span\u003e x: cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003econtourArea(x), reverse \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eTrue\u003c/span\u003e) \u003cspan style=\"color:#75715e\"\u003e#sorts from biggest \u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#print(contours)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    xPupil \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    yPupil \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e cnt \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e contours:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edrawContours(eye, [cnt], \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, (\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e255\u003c/span\u003e), \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        (x, y, w, h) \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eboundingRect(cnt)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        xPupil \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e int(x\u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003ew\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        yPupil \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e int(y\u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003eh\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e#print(\u0026#39;Pupil Center: \u0026#39;, xPupil, yPupil)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003erectangle(eye, (x,y), (x\u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003ew, y\u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003eh), (\u003cspan style=\"color:#ae81ff\"\u003e255\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e), \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eline(eye, (xPupil,\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e), (xPupil, \u003cspan style=\"color:#ae81ff\"\u003e300\u003c/span\u003e), (\u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e), \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e )\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        cv2\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eline(eye, (\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, yPupil), (\u003cspan style=\"color:#ae81ff\"\u003e400\u003c/span\u003e, yPupil), (\u003cspan style=\"color:#ae81ff\"\u003e200\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e), \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ebreak\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e xPupil, yPupil\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003col start=\"5\"\u003e\n\u003cli\u003e\u003cstrong\u003eReal-Time Updates\u003c/strong\u003e: This process is repeated five times every second, providing real-time tracking of the pupil\u0026rsquo;s position.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"conclusion\"\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eThe Eye-Tracking AAC System is a groundbreaking solution designed to revolutionize the way people with communication impairments interact with the world. By leveraging technologies like Python, C, and JavaScript, this system provides a seamless and intuitive method for typing using eye movements.\u003c/p\u003e\n\u003cp\u003eFrom the initial inspiration drawn from a TV show to the intricate details of eye-tracking algorithms, this project is a testament to the power of technology to make lives better. It\u0026rsquo;s not just about tracking eye movements; it\u0026rsquo;s about giving people the freedom to communicate on their own terms.\u003c/p\u003e\n\u003cp\u003eWhether you\u0026rsquo;re a developer interested in the nitty-gritty details of the code or someone who sees the potential for real-world applications, this project offers something for everyone.\u003c/p\u003e\n\u003cp\u003eFeel free to check out the \u003ca href=\"https://www.dropbox.com/sh/rxno9jgkgpzz1ou/AAB3DmIJprQ1kS404O4goReOa?dl=0\"\u003efull documentation here\u003c/a\u003e for more details.\u003c/p\u003e\n\u003cp\u003eSee the \u003ca href=\"https://github.com/RizPur/EyeTracker\"\u003efull code here\u003c/a\u003e.\u003c/p\u003e\n","description":"A system that enables the user to type with their eyes","image":"/images/projects/eyetracker/eye.png","permalink":"https://rizpur.com/projects/eyetracker/","title":"Eye-Tracking AAC System"},{"content":"\u003cp\u003eIn 2021, amid global challenges, I taught English in France to young minds from kindergarten (CP) to grade 5 (CM2). Their curiosity about Jamaica sparked an enchanting video project.\u003c/p\u003e\n\u003cp\u003eJoin this post to delve into our journey during unprecedented times. Through a crafted video, we embarked on a virtual exploration of Jamaica\u0026rsquo;s historical richness, culture, and heartwarming cross-border connections.\u003c/p\u003e\n\n\n    \n    \u003cdiv style=\"position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;\"\u003e\n      \u003ciframe allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen=\"allowfullscreen\" loading=\"eager\" referrerpolicy=\"strict-origin-when-cross-origin\" src=\"https://www.youtube.com/embed/Ih6pmFWjR1k?autoplay=0\u0026controls=1\u0026end=0\u0026loop=0\u0026mute=0\u0026start=0\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;\" title=\"YouTube video\"\n      \u003e\u003c/iframe\u003e\n    \u003c/div\u003e\n\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\u003c/code\u003e\u003c/pre\u003e","description":"A history lesson made for my students in France during COVID","image":"/images/cranwata.jpg","permalink":"https://rizpur.com/blogs/jamaica-history/","title":"History of Jamaica"}]